{"ast":null,"code":"import axios from \"axios\";\nconst api = axios.create({\n  // baseURL: process.env.REACT_APP_BACKEND_API,\n  baseURL: \"https://social-blog-cs.herokuapp.com/api\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n/**\n * console.log all requests and responses\n */\n\napi.interceptors.request.use(request => {\n  console.log(\"Starting Request\", request);\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    request.headers[\"Authorization\"] = \"Bearer \" + token;\n  }\n\n  return request;\n}, function (error) {\n  console.log(\"REQUEST ERROR\", error);\n});\napi.interceptors.response.use(response => {\n  console.log(\"Response:\", response);\n\n  if (response.data.data.accessToken) {\n    localStorage.setItem(\"token\", response.data.data.accessToken);\n  }\n\n  return response;\n}, function (error) {\n  error = error.response.data;\n  console.log(\"RESPONSE ERROR\", error);\n  return Promise.reject({\n    message: error.errors.message\n  });\n});\nexport default api;","map":{"version":3,"sources":["/Users/catanh/Desktop/coderschool/social-blog-group-3/src/apiService.js"],"names":["axios","api","create","baseURL","headers","interceptors","request","use","console","log","token","localStorage","getItem","error","response","data","accessToken","setItem","Promise","reject","message","errors"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAN,CAAa;AACvB;AACAC,EAAAA,OAAO,EAAE,0CAFc;AAGvBC,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAHc,CAAb,CAAZ;AAQA;AACA;AACA;;AACAH,GAAG,CAACI,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACGD,OAAD,IAAa;AACXE,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,OAAhC;AACA,QAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,MAAIF,KAAJ,EAAW;AACTJ,IAAAA,OAAO,CAACF,OAAR,CAAgB,eAAhB,IAAmC,YAAYM,KAA/C;AACD;;AACD,SAAOJ,OAAP;AACD,CARH,EASE,UAAUO,KAAV,EAAiB;AACfL,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BI,KAA7B;AACD,CAXH;AAcAZ,GAAG,CAACI,YAAJ,CAAiBS,QAAjB,CAA0BP,GAA1B,CACGO,QAAD,IAAc;AACZN,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBK,QAAzB;;AACA,MAAIA,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,WAAvB,EAAoC;AAClCL,IAAAA,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BH,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,WAAjD;AACD;;AACD,SAAOF,QAAP;AACD,CAPH,EAQE,UAAUD,KAAV,EAAiB;AACfA,EAAAA,KAAK,GAAGA,KAAK,CAACC,QAAN,CAAeC,IAAvB;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BI,KAA9B;AACA,SAAOK,OAAO,CAACC,MAAR,CAAe;AAAEC,IAAAA,OAAO,EAAEP,KAAK,CAACQ,MAAN,CAAaD;AAAxB,GAAf,CAAP;AACD,CAZH;AAeA,eAAenB,GAAf","sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  // baseURL: process.env.REACT_APP_BACKEND_API,\n  baseURL: \"https://social-blog-cs.herokuapp.com/api\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n/**\n * console.log all requests and responses\n */\napi.interceptors.request.use(\n  (request) => {\n    console.log(\"Starting Request\", request);\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      request.headers[\"Authorization\"] = \"Bearer \" + token;\n    }\n    return request;\n  },\n  function (error) {\n    console.log(\"REQUEST ERROR\", error);\n  }\n);\n\napi.interceptors.response.use(\n  (response) => {\n    console.log(\"Response:\", response);\n    if (response.data.data.accessToken) {\n      localStorage.setItem(\"token\", response.data.data.accessToken);\n    }\n    return response;\n  },\n  function (error) {\n    error = error.response.data;\n    console.log(\"RESPONSE ERROR\", error);\n    return Promise.reject({ message: error.errors.message });\n  }\n);\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}