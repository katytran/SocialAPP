{"ast":null,"code":"import axios from \"axios\";\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_API,\n  // baseURL: \"https://social-blog-cs.herokuapp.com/api\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n/**\r\n * console.log all requests and responses\r\n */\n\napi.interceptors.request.use(request => {\n  console.log(\"Starting Request\", request);\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    request.headers[\"Authorization\"] = \"Bearer \" + token;\n  }\n\n  return request;\n}, function (error) {\n  console.log(\"REQUEST ERROR\", error);\n});\napi.interceptors.response.use(response => {\n  console.log(\"Response:\", response);\n\n  if (response.data.data.accessToken) {\n    localStorage.setItem(\"token\", response.data.data.accessToken);\n  }\n\n  return response;\n}, function (error) {\n  error = error.response.data;\n  console.log(\"RESPONSE ERROR\", error);\n  return Promise.reject({\n    message: error.errors.message\n  });\n});\nexport default api;","map":{"version":3,"sources":["/Users/catanh/Desktop/coderschool/social-blog-group-3/src/apiService.js"],"names":["axios","api","create","baseURL","process","env","REACT_APP_BACKEND_API","headers","interceptors","request","use","console","log","token","localStorage","getItem","error","response","data","accessToken","setItem","Promise","reject","message","errors"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAN,CAAa;AACvBC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,qBADE;AAEvB;AACAC,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAHc,CAAb,CAAZ;AAQA;AACA;AACA;;AACAN,GAAG,CAACO,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACGD,OAAD,IAAa;AACXE,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,OAAhC;AACA,QAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,MAAIF,KAAJ,EAAW;AACTJ,IAAAA,OAAO,CAACF,OAAR,CAAgB,eAAhB,IAAmC,YAAYM,KAA/C;AACD;;AACD,SAAOJ,OAAP;AACD,CARH,EASE,UAAUO,KAAV,EAAiB;AACfL,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BI,KAA7B;AACD,CAXH;AAcAf,GAAG,CAACO,YAAJ,CAAiBS,QAAjB,CAA0BP,GAA1B,CACGO,QAAD,IAAc;AACZN,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBK,QAAzB;;AACA,MAAIA,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,WAAvB,EAAoC;AAClCL,IAAAA,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BH,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBC,WAAjD;AACD;;AACD,SAAOF,QAAP;AACD,CAPH,EAQE,UAAUD,KAAV,EAAiB;AACfA,EAAAA,KAAK,GAAGA,KAAK,CAACC,QAAN,CAAeC,IAAvB;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BI,KAA9B;AACA,SAAOK,OAAO,CAACC,MAAR,CAAe;AAAEC,IAAAA,OAAO,EAAEP,KAAK,CAACQ,MAAN,CAAaD;AAAxB,GAAf,CAAP;AACD,CAZH;AAeA,eAAetB,GAAf","sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_BACKEND_API,\r\n  // baseURL: \"https://social-blog-cs.herokuapp.com/api\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n/**\r\n * console.log all requests and responses\r\n */\r\napi.interceptors.request.use(\r\n  (request) => {\r\n    console.log(\"Starting Request\", request);\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      request.headers[\"Authorization\"] = \"Bearer \" + token;\r\n    }\r\n    return request;\r\n  },\r\n  function (error) {\r\n    console.log(\"REQUEST ERROR\", error);\r\n  }\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log(\"Response:\", response);\r\n    if (response.data.data.accessToken) {\r\n      localStorage.setItem(\"token\", response.data.data.accessToken);\r\n    }\r\n    return response;\r\n  },\r\n  function (error) {\r\n    error = error.response.data;\r\n    console.log(\"RESPONSE ERROR\", error);\r\n    return Promise.reject({ message: error.errors.message });\r\n  }\r\n);\r\n\r\nexport default api;\r\n"]},"metadata":{},"sourceType":"module"}